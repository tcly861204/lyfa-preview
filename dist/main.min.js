!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Preview=t()}(this,(function(){"use strict";const e=e=>n.dom.querySelector(e),t=function(e,t,i){e&&t&&i&&e.addEventListener(t,i,!1)},i=function(e,t,i){e&&t&&e.removeEventListener(t,i,!1)},n={app:null,index:0,len:0,list:[],dom:null,imgWidth:null,imgHeight:null,rotateNum:0,scaleNum:1,imgLeft:0,imgTop:0,fullScreen:!0,btns:{prev:null,next:null}};class s{static handleKeyEvents(e){try{switch(e.code.toLocaleLowerCase()){case"escape":window.removeEventListener("keydown",s.handleKeyEvents,!1),n.dom.parentNode.removeChild(n.dom);break;case"keya":case"arrowleft":s.handlePrev();break;case"keyd":case"arrowright":s.handleNext()}}catch(t){}}static updateScreen(){const t=e(".swipper img"),i=e(".action-item.fullsceen .icon");n.fullScreen=parseInt(t.style.width)>=window.innerWidth||parseInt(t.style.height)>=window.innerHeight,i.style.backgroundPosition=""+(n.fullScreen?"-28px -27px":"-28px 0")}static handlePrev(){if(this.animation)return;this.animation=!0;e(".swipper img").setAttribute("class","animated fadeOutRight");const t=setTimeout((()=>{clearTimeout(t),this.animation=!1;const e=0===n.index?n.len-1:n.index-1;n.app.display(e)}),500)}static handleNext(){if(this.animation)return;this.animation=!0;e(".swipper img").setAttribute("class","animated fadeOutLeft");const t=setTimeout((()=>{clearTimeout(t),this.animation=!1;const e=n.index===n.len-1?0:n.index+1;n.app.display(e)}),500)}static handleFullScreen(){const t=e(".action-item.fullsceen .icon"),i=e(".swipper img");let s=1,l=1;n.fullScreen?(n.fullScreen=!1,s=(window.innerHeight-140)/n.imgHeight,l=(window.innerWidth-140)/n.imgWidth,n.scaleNum=l>s?s:l):(n.fullScreen=!0,s=window.innerHeight/n.imgHeight,l=window.innerWidth/n.imgWidth,n.scaleNum=l>s?l:s);const o=n.imgWidth*n.scaleNum,a=n.imgHeight*n.scaleNum;n.imgLeft=(window.innerWidth-o)/2,n.imgTop=(window.innerHeight-a)/2,i.style.width=`${o}px`,i.style.height=`${a}px`,i.style.top=`${n.imgTop}px`,i.style.left=`${n.imgLeft}px`,t.style.backgroundPosition=""+(n.fullScreen?"-28px -27px":"-28px 0")}static handleRotate(){const t=e(".swipper img");n.rotateNum-=90,t.style.transform=`rotate(${n.rotateNum}deg)`}static handlerZoom(t){const i=e(".swipper img");if("in"===t){if(!(n.scaleNum+.2<3))return!1;n.scaleNum+=.2}if("out"===t){if(!(n.scaleNum-.2>.2))return!1;n.scaleNum-=.2}const s=n.imgWidth*n.scaleNum,l=n.imgHeight*n.scaleNum;n.imgLeft=n.imgLeft+(parseInt(i.style.width)-s)/2,n.imgTop=n.imgTop+(parseInt(i.style.height)-l)/2,i.style.width=`${s}px`,i.style.height=`${l}px`,i.style.top=`${n.imgTop}px`,i.style.left=`${n.imgLeft}px`,this.updateScreen()}}s.animation=!1;var l="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIYAAAAzCAYAAABSfnBXAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3FpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoyY2U1ODBmMi04NGJmLTA1NGUtODYzMC1jMmJlOWJiZjExYjAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NjY3OEE5QzI0NTJGMTFFQ0JBODlGNjA0NTc5MkJDRkEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjY3OEE5QzE0NTJGMTFFQ0JBODlGNjA0NTc5MkJDRkEiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjk4Y2Y1MDY2LTEwNWUtYzQ0Ni1hYTZmLWMyZmI1NjA3MDhkNyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoyY2U1ODBmMi04NGJmLTA1NGUtODYzMC1jMmJlOWJiZjExYjAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6V3BHuAAAFZklEQVR42uycXWgcVRTHZ7spRhtqbaVBUCzEh/gghRKU2AcxSEVBlGjzoMQ+hEQUS5HEPlgEsRalm60+CGqJUoliWY2+WSooPlgrKBb0IQEp/fClTVChtlaabKf/w/6HXsadZma8s7t35xz4MR/33jMfe+bMvWfu2YLv+56KSlhW6C1QUcNQUcOIKYNgCsyCS1xOcb8aRkj8EGn3xxU/grT14kg3KIEKGAG9YCWXI9xfYj3bsgeszUDvczzvpFJh29DdRuczRFjS7o9LlKStF4eS0X4GjIBeLmeMslJK/VEcAlUwalmvR70ilQRtKmxTDZe1kmE0qt0gWGLbCVAMlRe532e9QYs/3gFwDiyAXWC9Rd2bqTuucQRGcY5tc28YU4anKIb0mcYReI4py0+2eKV/DMO0qbsvpnGYRtFXr069PkYhRNr9rSqbufwSVCPqVFlu1rclB8E+ru8Eo6DTku6fwABYAlvBIugzyvu4byvrDLCNF6eP0Wga7TEusV3vNfouHst91rd9zdeDMXCWx9gDuix7jkXqXuR2vX2ROlphVJLW06RtdzzkCUw9wfoKo/x4Bl7rItgP9nJ7HDxlUb94gX56hQ7wA+ngvv5IT5HjOMYRLh8GxYg614FHQvWzkGnwMt37O5Z1B8ZR5XUWub6sUeTVMIK+hQSxXjCMI/Aasr0DPAouG30NjXy2uXwO3uR6OMgVBLdeZ7lEQ1dleC7DYDeDa89a1i0dzaOGpwg8x9FQh9TTzudVuhm8WorofMr+Oa5fBsN563zm1TDMYJfEKWY5+pjldhDUmjeMY5ul610FXqPeeUZBOzM2ijhluQ9wJeV341j35SXApYaRzDgugLs1JN6+H9HS8DOPJ0/76nb/iKYTdeLLJvAp+BfclVLHQ+ANMJPB+W3n+Q0laDPENtv/Ez3UOZ+J5XnwGTjTzhephqGiAS4VNQwVNQwVNQwVNQwVNQwVNQyVdjaMNeBjvXVqGKbcD34BT7bJ9WuKYpTE/Ngi8wUmjQ81ImWwpYHzM2x+NIszUafEell/nFvLiTpeK7HchJIC1z+KuIF/02A2OGYYzUpRrMcoH7hDLhhGD9jBJ6ZAj1EOeYzDxvq0RePI2jCamaJosp5zMhY4J+KAC4ZR4aSUd8E6w3MMgNO8aTJHcRyc4PakI4YRlaLoNShFMWDCmN8x0mqvknqdzwnwBLjBq02f/8O7mkj0DdgIPgHnQRm8zbJnwJY03RwvWcLS/01wanaKoqQjSlriTm5LuuJBF0Yla3jDZb7BK3XK/wqNSt4DX4Eu8KAD/e0eLo9EGJofKu+xeGy5R5JgtJ/HkYdJ/i/jgguGITfkrFfLkpqPoUM8x2Gu35viHAoRpK23nESlKJpklaIoaYjjXN9LA7noShzjO3APeDWBnu+5vNMBj9HMFEVJQ1yk15h2LcDVwUDWjW0auolKUQxEUxQjDONr8CF4K4Ge4BUy68A1NzNFUdIQJR1R0hKHXYt8/shh1ElwU4yhTZcR0yg7kj7QrBTFLkY5faYnjjFd0XNhuCpPlPyHwm/g9hi2FQxTzU5oq4t0rl/0atPn3wdzfPfPcXuIHmSBnVHxoNssHPc8vcUY9cqIbpeXbeK01W8l+8AtYCXYCG6uU2cdI3euBbianaLoRIDrWh92OnkjToEz4AujvB/86mhIvJkpis6ExKM+u//JUYl0xm71an+E+phRLn/qdQeDNGUOv062cSf9NnCM0eBvwWoLOucZ3HqJr5LuVrrgjmXew09zpPE4I6KByLv4A3ACTOZkBLeJI5YHvFqKoq34hqQrbmBfo2VEM9GSi6YoquRXdDKwihqGSny5IsAAQEF7ge9LblUAAAAASUVORK5CYII=";class o{constructor(){this.init(),t(window,"keydown",s.handleKeyEvents),function(){const i=e(".next");i.style.display=n.len>1?"block":"none",t(i,"click",s.handleNext)}(),function(){const i=e(".prev");i.style.display=n.len>1?"block":"none",t(i,"click",s.handlePrev)}(),function(){const l=e("div.close");t(l,"click",(()=>{try{e(".swipper img").setAttribute("class","animated bounceOut");const t=setTimeout((()=>{clearTimeout(t),i(window,"keydown",s.handleKeyEvents),n.dom.parentNode.removeChild(n.dom)}),900)}catch(t){}}))}(),function(){const i=e(".action-item.fullsceen"),n=e(".action-item.zoomIn"),l=e(".action-item.zoomOut"),o=e(".action-item.rotate");t(i,"click",s.handleFullScreen),t(o,"click",s.handleRotate),t(n,"click",(()=>s.handlerZoom("in"))),t(l,"click",(()=>s.handlerZoom("out")))}()}init(){n.dom=document.createElement("div"),n.dom.className="preview-container__mask",n.dom.innerHTML=`<section class="preview-container">\n      \n    <header class="preview-container__header">\n      <h2 class="title"></h2>\n      <div class="icon close" style="background-image: url(${l});"></div>\n    </header>\n  \n      \n    <section class="preview-container__body">\n      <div class="preview-container__body-btn prev">\n        <span class="icon" style="background-image: url(${l})"></span>\n      </div>\n      <div class="swipper">\n      </div>\n      <div class="preview-container__body-btn next">\n        <span class="icon" style="background-image: url(${l})"></span>\n      </div>\n    </section>\n  \n      <footer class="preview-container__footer">\n    <section class="preview-container__footer-action">\n      <ul>\n        <li class="action-item app" data-num="0/0"><span class="icon" style="background-image: url(${l})"></span></li>\n        <li class="action-item fullsceen"><span class="icon" style="background-image: url(${l})"></span></li>\n        <li class="action-item zoomIn"><span class="icon" style="background-image: url(${l})"></span></li>\n        <li class="action-item zoomOut"><span class="icon" style="background-image: url(${l})"></span></li>\n        <li class="action-item rotate"><span class="icon" style="background-image: url(${l})"></span></li>\n      </ul>\n    </section>\n  </footer>\n    </section>`,document.body.appendChild(n.dom)}}return class extends class{constructor(){this.winWidth=window.innerWidth,this.winHeight=window.innerHeight,this.isLayout=!1}updateNum(){e(".action-item.app").setAttribute("data-num",`${n.index+1}/${n.len}`)}updateTitle(t){e("h2.title").innerHTML=t.name}render(t){e(".swipper").innerHTML='<div class="loading"></div>';const i=new Image,s=this;i.src=t.src,i.onload=function(){const e=i.width,l=i.height;if(n.imgWidth=e,n.imgHeight=l,e>s.winWidth-140||l>s.winHeight-140){const t=(s.winHeight-140)/l,i=(s.winWidth-140)/e;n.scaleNum=i>t?t:i,n.fullScreen=!1,n.imgLeft=(s.winWidth-e*n.scaleNum)/2,n.imgTop=(s.winHeight-l*n.scaleNum)/2}else n.fullScreen=!1,n.imgLeft=(s.winWidth-e)/2,n.imgTop=(s.winHeight-l)/2;s.renderImage(t,e,l)}}renderImage(i,l,o){const a=document.createElement("img");let c=null;a.src=i.src,a.setAttribute("style",`\n      position: absolute;\n      width: ${l*n.scaleNum}px;\n      height: ${o*n.scaleNum}px;\n      top: ${n.imgTop}px;\n      left: ${n.imgLeft}px;\n      cursor: pointer;\n      transition: all ease-in-out .2s;\n    `),a.addEventListener("mousedown",(function(e){e.preventDefault(),this.style.cursor="move",this.style.transition="none";const t=e.clientX,i=e.clientY,s=n.imgLeft,l=n.imgTop;document.onmousemove=e=>{n.imgLeft=s+(e.clientX-t),n.imgTop=l+(e.clientY-i),this.style.left=`${n.imgLeft}px`,this.style.top=`${n.imgTop}px`},document.onmouseup=()=>{document.onmousemove=null,document.onmouseup=null,this.style.cursor="pointer",this.style.transition="all ease-in-out .2s"}}),!1),t(a,"mousewheel",(function(e){e.preventDefault();const[t,i,s]=[n.scaleNum,e.clientX-n.imgLeft,e.clientY-n.imgTop];this.style.transition="none",e.deltaY<0?(c=.08,t>10&&(c=0)):(c=-.08,t<.2&&(c=0)),n.scaleNum+=c,n.imgTop-=(n.scaleNum/t-1)*s,n.imgLeft-=(n.scaleNum/t-1)*i,this.style.left=`${n.imgLeft}px`,this.style.top=`${n.imgTop}px`,this.style.width=l*n.scaleNum+"px",this.style.height=o*n.scaleNum+"px"})),t(a,"mouseout",(function(e){this.style.transition.indexOf("none")>-1&&(this.style.transition="all ease-in-out .4s")}));const m=setTimeout((()=>{clearTimeout(m);const t=e(".swipper");t.innerHTML="",t.appendChild(a),s.updateScreen()}),100)}}{constructor(e){super(),n.app=this,n.index=0,n.list=e.list,n.len=n.list.length}display(e=0){n.index=e>n.len-1?0:e,this.isLayout||(this.isLayout=!0,new o),this.updateNum();try{const e=n.list[n.index];if(this.updateTitle(e),n.rotateNum=0,n.scaleNum=1,n.imgLeft=0,n.imgTop=0,n.fullScreen=!0,e.ext)switch(e.ext.toLocaleLowerCase()){case"jpeg":case"jpg":case"png":case"gif":this.render(e)}}catch(t){}}}}));
